<!doctype html>
<html lang="it">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Dario & Maria Costanza — Save the Date</title>
  <meta name="robots" content="noindex, nofollow" />
  <meta name="theme-color" content="#7A1F2B" />

  <!-- Webfonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com" crossorigin>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=DM+Serif+Display:ital@0;1&family=Inter:wght@400;600;700&display=swap" rel="stylesheet">

  <style>
    /* ===== Palette ===== */
    :root{
      --ivory:#F7F4EE;
      --paper:#FFFFFF;
      --salvia:#7A8B7B;
      --bordeaux:#7A1F2B;
      --charcoal:#3F3F3F;
      --line:#E9E4DA;
      --shadow:0 12px 30px rgba(0,0,0,.08);
    }

    /* ===== Base ===== */
    *{box-sizing:border-box}
    html,body{margin:0;padding:0;background:var(--ivory);color:var(--charcoal);font-family:"Inter", system-ui, -apple-system, Segoe UI, Roboto, sans-serif}
    img{max-width:100%;display:block}
    a{color:var(--bordeaux);text-decoration:none}
    .container{max-width:980px;margin:0 auto;padding:0 20px}
    html{scroll-behavior:smooth}

    /* ===== Pattern di sfondo sobrio ===== */
    body::before{
      content:""; position:fixed; inset:0; z-index:-2;
      background:
        radial-gradient(40vw 40vw at -10% 10%, rgba(122,139,123,.12), transparent 50%),
        radial-gradient(50vw 50vw at 110% 0%, rgba(122,31,43,.08), transparent 55%),
        radial-gradient(45vw 45vw at 80% 95%, rgba(122,139,123,.12), transparent 55%);
      filter:saturate(.95);
    }

    /* ===== Overlay busta (nuova versione SVG) ===== */
    body.envelope-lock{height:100svh;overflow:hidden}
    .envelope-overlay{
      position:fixed; inset:0; background:linear-gradient(180deg, #F7F4EE, #F2EDE4);
      display:flex; align-items:center; justify-content:center; z-index:9999; padding:20px;
    }
    .envelope{ width:min(540px, 92vw); height:min(360px, 62vw); position:relative; cursor:pointer; }
    .env-svg { width:100%; height:100%; display:block; }

    /* Lettera interna: appare all'apertura */
    .env-letter{
      position:absolute; left:7%; right:7%; top:16%; bottom:10%;
      background:var(--paper); border:1px solid var(--line); border-radius:12px;
      display:flex; align-items:center; justify-content:center; text-align:center; padding:18px;
      opacity:0; transform:translateY(0);
      z-index:2; will-change: transform, opacity; -webkit-backface-visibility:hidden;
    }
    .env-letter .badge{font:700 .8rem/1 'Inter'; color:var(--salvia); letter-spacing:.18em; text-transform:uppercase; margin-bottom:8px}
    .env-letter h1{font-family:"DM Serif Display","Playfair Display",serif; font-weight:400; font-size:clamp(1.6rem, 6vw, 2.4rem); margin:.2em 0}
    .env-letter p{color:var(--salvia); margin:.2em 0}

    .envelope.open .env-letter{ animation:letterShow .85s .15s ease forwards }


    @keyframes letterShow{ to{opacity:1; transform:translateY(-12%)} }

    /* ===== Hero ===== */
    .hero{min-height:94svh; display:flex; align-items:center; justify-content:center; padding:64px 20px 40px}
    .card{
      position:relative; background:var(--paper); border:1px solid var(--line); border-radius:28px;
      box-shadow:var(--shadow); text-align:center; padding:48px 28px;
    }
    .badge-hero{font:600 0.9rem/1 "Inter"; letter-spacing:.18em; text-transform:uppercase; color:var(--salvia); margin-bottom:10px}
    .monogram{display:inline-flex; align-items:center; justify-content:center; width:88px; height:88px; border:1px solid var(--line); border-radius:50%; margin:6px auto 14px; background:linear-gradient(#fff, #FAF8F4); box-shadow:0 6px 16px rgba(0,0,0,.06) inset}
    .names{font-family:"DM Serif Display","Playfair Display",serif; font-size:clamp(2rem, 7vw, 4.6rem); line-height:1.08; margin:.1em 0 .15em; font-weight:400}
    .amp{color:var(--salvia)}
    .dateplace{font:400 clamp(1rem,2.6vw,1.25rem)/1.4 "Inter"; color:var(--salvia)}

    .cta-group{margin-top:28px; display:flex; gap:12px; flex-wrap:wrap; justify-content:center}
    .btn{appearance:none; border:none; border-radius:28px; padding:12px 20px; font:600 1rem/1 "Inter"; cursor:pointer; transition:.25s}
    .btn-primary{background:var(--bordeaux); color:#fff; box-shadow:0 10px 22px rgba(122,31,43,.15)}
    .btn-primary:hover{transform:translateY(-1px); filter:brightness(1.06)}
    .btn-outline{background:transparent; color:var(--bordeaux); border:1px solid var(--bordeaux)}
    .btn-outline:hover{background:rgba(122,31,43,.08)}
    .link-btn{display:inline-block; border:2px solid var(--bordeaux); color:var(--bordeaux); border-radius:9999px; padding:10px 18px; font-weight:600; transition:.25s}
    .link-btn:hover{background:rgba(122,31,43,.08)}
    .link-group{display:flex; gap:12px; flex-wrap:wrap}

    /* CTA scroll grande */
    .scroll-indicator{margin-top:26px}
    .scroll-cta{
      display:inline-flex; align-items:center; gap:8px; padding:12px 18px; border-radius:16px;
      color:var(--bordeaux); font-weight:700; letter-spacing:.06em;
      font-size:clamp(1.15rem, 3vw, 1.45rem); text-transform:uppercase;
      background:rgba(122,31,43,.08);
    }
    .scroll-cta .arrow{display:inline-block; animation:down 1.4s infinite}
    @keyframes down{0%,100%{transform:translateY(0)}50%{transform:translateY(3px)}}

    /* ===== Sezioni ===== */
    section{padding:80px 0; border-top:1px solid var(--line)}
    .section-title{font-family:"DM Serif Display","Playfair Display",serif; font-weight:400; font-size:clamp(1.6rem,4.5vw,2.2rem); margin:0 0 12px; text-align:center}
    .section-sub{color:var(--salvia); text-align:center; margin:0 0 28px}

    /* Countdown */
    .countdown{ display:flex; gap:16px; justify-content:center; flex-wrap:wrap }
    .cd-item{ background:#fff; border:1px solid var(--line); padding:18px 22px; border-radius:14px; min-width:106px; text-align:center; box-shadow:var(--shadow); transform:translateY(6px); opacity:0; transition:.6s ease }
    .cd-value{ font:700 2rem/1 "Inter"; color:var(--bordeaux) }
    .cd-label{ font:600 .8rem/1.1 "Inter"; color:var(--salvia); text-transform:uppercase; letter-spacing:.08em; margin-top:6px }
    .reveal{opacity:0; transform:translateY(14px); transition:.7s ease}
    .reveal.show{opacity:1; transform:none}
    .cd-item.show{opacity:1; transform:none}

    /* Timeline */
    .timeline{max-width:860px;margin:0 auto;display:grid;grid-template-columns:1fr 80px 1fr;gap:20px}
    .tl-line{position:relative;background:linear-gradient(#7A8B7B,#7A8B7B);width:2px;margin:0 auto;border-radius:2px}
    .tl-line::before,.tl-line::after{content:"";position:absolute;left:50%;transform:translateX(-50%);width:10px;height:10px;background:var(--salvia);border-radius:50%}
    .tl-line::before{top:-12px}.tl-line::after{bottom:-12px}
    .tl-item{background:#fff;border:1px solid var(--line);border-radius:12px;padding:16px 18px;box-shadow:var(--shadow)}
    .tl-title{font-family:"DM Serif Display","Playfair Display",serif;color:var(--bordeaux);font-size:1.15rem;margin:0 0 6px}
    .tl-time{color:var(--salvia);margin:0 0 8px}
    .tl-icon{width:44px;height:44px;opacity:.9}

    /* Card mappa */
    .map-card{ background:#fff; border:1px solid var(--line); border-radius:16px; overflow:hidden; box-shadow:var(--shadow) }
    .map-card header{ padding:14px 16px; border-bottom:1px solid var(--line) }
    .map-card header h3{ margin:0; font-family:"DM Serif Display","Playfair Display",serif; font-weight:400; font-size:1.15rem }
    .map-card .frame{ width:100%; aspect-ratio: 16/10; border:0 }
    .map-card .links{ padding:12px 16px }
    .map-card .links .link-group{ justify-content:flex-start }

    /* Photo grid (ristorante) */
    .photo-grid{ display:grid; grid-template-columns:1fr; gap:14px; margin-bottom:18px }
    @media (min-width:820px){ .photo-grid{ grid-template-columns:1fr 1fr } }
    .photo-card{ background:#fff; border:1px solid var(--line); border-radius:16px; overflow:hidden; box-shadow:var(--shadow) }
    .photo-card img{ width:100%; height:auto; display:block }

    /* Finale elegante */
    .finale{ text-align:center; max-width:780px; margin:0 auto }
    .finale .seal{
      display:inline-block; width:80px; height:80px; border-radius:50%;
      background:radial-gradient(circle at 30% 30%, #8C2432, #6B1623 60%, #5A1120 100%);
      box-shadow:0 6px 18px rgba(0,0,0,.25), inset 0 6px 12px rgba(255,255,255,.12);
      border:1px solid rgba(0,0,0,.15); margin-bottom:12px;
      position:relative;
    }
    .finale .seal::after{
      content:"D ♥ M"; position:absolute; left:50%; top:50%; transform:translate(-50%,-50%);
      font-family:"DM Serif Display","Playfair Display",serif; font-size:16px; color:#F4D9DE; letter-spacing:.06em; opacity:.9;
    }
    .hashtag{font-weight:700; color:var(--bordeaux)}

    /* Footer & sticky bar */
    footer{ padding:46px 0 120px; color:var(--salvia); text-align:center }
    .sticky-actions{ position:fixed; left:0; right:0; bottom:0; z-index:10; display:flex; gap:10px; padding:10px 16px; background:linear-gradient(180deg, rgba(247,244,238,.1), rgba(247,244,238,.9)); backdrop-filter: blur(6px); border-top:1px solid var(--line) }
    .sticky-actions .btn{ flex:1; border-radius:16px; padding:14px 14px; box-shadow:none }
    @media (min-width:720px){ .sticky-actions{ display:none } }

    /* Piccolo chooser per i due contatti WhatsApp */
    .wa-chooser{ position:fixed; inset:0; display:none; align-items:center; justify-content:center; background:rgba(0,0,0,.35); z-index:9999; padding:20px }
    .wa-chooser .sheet{ background:#fff; border-radius:16px; border:1px solid var(--line); box-shadow:var(--shadow); width:min(480px, 94vw); padding:16px }
    .wa-chooser h3{ margin:0 0 12px; font-family:"DM Serif Display","Playfair Display",serif; color:var(--bordeaux) }
    .wa-chooser p{ margin:0 0 14px; color:var(--salvia) }
    .wa-chooser .row{ display:flex; gap:10px; flex-wrap:wrap }
    .wa-chooser .btn{ flex:1 }
    
	   /* Flap: ruota in su (punta verso l'alto) */
	.env-flap-shape{
	  transform-origin: 360px 40px;
	  transform-box: fill-box;
	  transition: transform .85s ease;
	  will-change: transform;
	}
	.envelope.open .env-flap-shape{
	  transform: rotateX(180deg);
	}
	.envelope{
	  perspective: 1200px;
	  transform-style: preserve-3d;
	}
  </style>
</head>
<body class="envelope-lock">

<!-- ===== Overlay: BUSTA CHIUSA (nuova) ===== -->
  <div class="envelope-overlay" id="envOverlay" aria-label="Invito — Tocca per aprire">
    <div class="envelope" id="envelope" role="button" aria-pressed="false" tabindex="0">
      <!-- Busta SVG: 4 triangoli perfetti + pieghe a X + sigillo cera lacca -->
      <svg class="env-svg" viewBox="0 0 720 480" aria-hidden="true">
        <defs>
          <filter id="envShadow" x="-20%" y="-30%" width="140%" height="180%">
            <feDropShadow dx="0" dy="10" stdDeviation="14" flood-color="rgba(0,0,0,.18)"/>
          </filter>
          <radialGradient id="paperGrad" cx="50%" cy="35%" r="75%">
            <stop offset="0%"  stop-color="#FFFFFF"/>
            <stop offset="100%" stop-color="#F9F7F3"/>
          </radialGradient>
          <!-- Cera lacca -->
          <radialGradient id="waxGrad" cx="35%" cy="30%" r="85%">
            <!-- Se vuoi più bordeaux, cambia i colori con #7A1F2B / #6B1623 -->
            <stop offset="0%"  stop-color="#D2262A"/>
            <stop offset="60%" stop-color="#B11C1C"/>
            <stop offset="100%" stop-color="#7A0F16"/>
          </radialGradient>
          <radialGradient id="waxHighlight" cx="30%" cy="25%" r="50%">
            <stop offset="0%" stop-color="rgba(255,255,255,.55)"/>
            <stop offset="100%" stop-color="rgba(255,255,255,0)"/>
          </radialGradient>
        </defs>

        <!-- Rettangolo carta + ombra -->
        <rect x="20" y="40" width="680" height="420" rx="4" fill="url(#paperGrad)" filter="url(#envShadow)" />

        <!-- Lembi laterali -->
        <path d="M20,40 L360,240 L20,460 Z" fill="#FFFFFF" stroke="#E9E4DA" stroke-width="1"/>
        <path d="M700,40 L360,240 L700,460 Z" fill="#FFFFFF" stroke="#E9E4DA" stroke-width="1"/>

        <!-- Lembo inferiore -->
        <path d="M20,460 L360,240 L700,460 Z" fill="#FFFFFF" stroke="#E9E4DA" stroke-width="1"/>

        <!-- Lembo superiore (flap) -->
        <path class="env-flap-shape" d="M20,40 L700,40 L360,240 Z" fill="#FFFFFF" stroke="#E9E4DA" stroke-width="1"/>

        <!-- Pieghe centrali a X -->
        <path d="M20,40 L700,460" stroke="#E9E4DA" stroke-width="1"/>
        <path d="M700,40 L20,460" stroke="#E9E4DA" stroke-width="1"/>
        <circle cx="360" cy="240" r="1.6" fill="#E9E4DA"/>

<!-- Sigillo: immagine raster incorporata -->

<image
  href="seal.png"
  xlink:href="seal.png"
  x="300" y="203"
  width="100" height="100"
  preserveAspectRatio="xMidYMid meet"
/>

<!-- Iniziali sopra la foto -->
<g font-family="DM Serif Display, serif" text-anchor="middle"
   fill="rgba(255,255,255,.85)" stroke="rgba(0,0,0,.35)" stroke-width=".6">
  <text x="340" y="257" font-size="18">D</text>
  <text x="360" y="257" font-size="18">M</text>
</g>

      </svg>

      <!-- Cartoncino interno -->
      <div class="env-letter" aria-hidden="true">
        <div>
          <div class="badge">Save the Date</div>
          <h1>Dario &amp; Maria Costanza</h1>
          <p>6 dicembre 2026</p>
        </div>
      </div>
    </div>
  </div>
    <!-- ===== HERO ===== -->
  <header class="hero" id="home" aria-label="Save the Date">
    <div class="container" style="max-width:840px">
      <div class="card reveal show" role="banner">
        <div class="badge-hero">Save the Date</div>

        <!-- Monogramma -->
        <div class="monogram" aria-hidden="true">
          <svg width="52" height="52" viewBox="0 0 52 52" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
            <circle cx="26" cy="26" r="25" stroke="#E6E0D6" fill="none"/>
            <path d="M14 28c4-6 8-8 12-2 4-6 8-4 12 2" stroke="#7A1F2B" stroke-width="1.4" fill="none" stroke-linecap="round"/>
            <text x="16" y="22" font-family='DM Serif Display, serif' font-size="12" fill="#7A8B7B">D</text>
            <text x="30" y="22" font-family='DM Serif Display, serif' font-size="12" fill="#7A8B7B">M</text>
            <path d="M24 22 c0 -2 3 -3 4 -1 c1.2 -2 4 -1 4 1 c0 3 -4 5 -4 5 s-4 -2 -4 -5z" fill="#7A1F2B" opacity=".85"/>
          </svg>
        </div>

        <h1 class="names">Dario <span class="amp">&amp;</span> Maria Costanza</h1>
        <p class="dateplace">6 dicembre 2026 · Nocera Terinese</p>

        <div class="cta-group" role="group" aria-label="Azioni principali">
          <button class="btn btn-primary" id="btnWhatsApp">RSVP su WhatsApp</button>
          <a href="#timeline" class="link-btn">Timeline</a>
          <a href="#chiesa" class="link-btn">Chiesa</a>
          <a href="#ristorante" class="link-btn">Location</a>
          <button class="btn btn-outline" id="btnICS">Aggiungi al calendario</button>
        </div>

        <div class="scroll-indicator">
          <a href="#timeline" class="scroll-cta">SCOPRI DI PIÙ <span class="arrow">↓</span></a>
        </div>
      </div>
    </div>
  </header>

  <!-- ===== COUNTDOWN ===== -->
  <section id="countdown" aria-labelledby="countdownTitle">
    <div class="container">
      <h2 class="section-title reveal" id="countdownTitle">Countdown</h2>
      <p class="section-sub reveal">Manca sempre meno al grande giorno!</p>
      <div class="countdown" role="list">
        <div class="cd-item" role="listitem"><div class="cd-value" id="cdDays">—</div><div class="cd-label">giorni</div></div>
        <div class="cd-item" role="listitem"><div class="cd-value" id="cdHours">—</div><div class="cd-label">ore</div></div>
        <div class="cd-item" role="listitem"><div class="cd-value" id="cdMinutes">—</div><div class="cd-label">minuti</div></div>
        <div class="cd-item" role="listitem"><div class="cd-value" id="cdSeconds">—</div><div class="cd-label">secondi</div></div>
      </div>
    </div>
  </section>

  <!-- ===== TIMELINE ===== -->
  <section id="timeline" aria-labelledby="timelineTitle">
    <div class="container" style="max-width:900px">
      <h2 class="section-title reveal" id="timelineTitle">Timeline del giorno</h2>
      <p class="section-sub reveal">Scorri per scoprire tutti i dettagli.</p>

      <div class="timeline">
        <!-- Cerimonia -->
        <div class="tl-item reveal">
          <svg class="tl-icon" viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
            <circle cx="24" cy="24" r="12" fill="none" stroke="#7A8B7B" stroke-width="2"/>
            <circle cx="40" cy="40" r="12" fill="none" stroke="#7A8B7B" stroke-width="2"/>
          </svg>
          <h3 class="tl-title">Cerimonia</h3>
          <p class="tl-time">Ore <strong>11:00</strong> — Chiesa di San Giovanni Battista (Nocera Terinese)</p>
          <div class="link-group">
            <a class="link-btn" target="_blank" href="https://www.google.com/maps?q=Chiesa+di+San+Giovanni+Battista+Nocera+Terinese&hl=it">Apri in Google Maps</a>
            <a class="link-btn" target="_blank" href="https://www.google.com/maps/dir/?api=1&destination=Chiesa+di+San+Giovanni+Battista+Nocera+Terinese">Avvia navigazione</a>
          </div>
        </div>

        <!-- Linea centrale -->
        <div class="tl-line" aria-hidden="true"></div>

        <!-- Ricevimento -->
        <div class="tl-item reveal">
          <svg class="tl-icon" viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
            <path d="M18 24h28M18 34h28M18 44h28" stroke="#7A8B7B" stroke-width="2"/>
            <circle cx="22" cy="24" r="2" fill="#7A8B7B"/><circle cx="22" cy="34" r="2" fill="#7A8B7B"/><circle cx="22" cy="44" r="2" fill="#7A8B7B"/>
          </svg>
          <h3 class="tl-title">Ricevimento</h3>
          <p class="tl-time">Ore <strong>13:00</strong> — Villa Grandinetti</p>
          <div class="link-group">
            <a class="link-btn" target="_blank" href="https://www.google.com/maps?q=Villa+Grandinetti+Nocera+Terinese&hl=it">Apri in Google Maps</a>
            <a class="link-btn" target="_blank" href="https://www.google.com/maps/dir/?api=1&destination=Villa+Grandinetti+Nocera+Terinese">Avvia navigazione</a>
            <a class="link-btn" target="_blank" href="http://www.villagrandinetti.it/">Sito della location</a>
          </div>
        </div>
      </div>

    </div>
  </section>

  <!-- ===== SEZIONE CHIESA ===== -->
  <section id="chiesa" aria-labelledby="chiesaTitle">
    <div class="container">
      <h2 class="section-title reveal" id="chiesaTitle">Chiesa — Come arrivare</h2>
      <p class="section-sub reveal">Chiesa di San Giovanni Battista — Nocera Terinese</p>

      <article class="map-card reveal">
        <header><h3>Chiesa di San Giovanni Battista</h3></header>
        <iframe id="mapChurch" class="frame" title="Mappa Chiesa di San Giovanni Battista" loading="lazy" referrerpolicy="no-referrer-when-downgrade" allowfullscreen></iframe>
        <div class="links">
          <div class="link-group">
            <a class="link-btn" target="_blank" href="https://www.google.com/maps?q=Chiesa+di+San+Giovanni+Battista+Nocera+Terinese&hl=it">Apri in Google Maps</a>
            <a class="link-btn" target="_blank" href="https://www.google.com/maps/dir/?api=1&destination=Chiesa+di+San+Giovanni+Battista+Nocera+Terinese">Avvia navigazione</a>
          </div>
        </div>
      </article>
    </div>
  </section>

  <!-- ===== SEZIONE RISTORANTE ===== -->
  <section id="ristorante" aria-labelledby="ristoranteTitle">
    <div class="container">
      <h2 class="section-title reveal" id="ristoranteTitle">Ristorante — Villa Grandinetti</h2>
      <p class="section-sub reveal">Come arrivare e informazioni utili</p>

      <!-- FOTO PRIMA DELLA MAPPA -->
      <div class="photo-grid">
        <figure class="photo-card reveal">
          <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQI5hauHHRVSc8ZX6CnYegJlcqLPv0OXkHDLg&s" alt="Villa Grandinetti - foto 1">
        </figure>
        <figure class="photo-card reveal">
          <img src="https://cdn0.matrimonio.com/vendor/9015/3_2/960/jpg/salvatore-juandri-1067_2_169015-171157158315075.jpeg" alt="Villa Grandinetti - foto 2">
        </figure>
      </div>

      <!-- CARD MAPPA -->
      <article class="map-card reveal">
        <header><h3>Villa Grandinetti — Nocera Terinese</h3></header>
        <iframe id="mapVilla" class="frame" title="Mappa Villa Grandinetti" loading="lazy" referrerpolicy="no-referrer-when-downgrade" allowfullscreen></iframe>
        <div class="links">
          <div class="link-group">
            <a class="link-btn" target="_blank" href="https://www.google.com/maps?q=Villa+Grandinetti+Nocera+Terinese&hl=it">Apri in Google Maps</a>
            <a class="link-btn" target="_blank" href="https://www.google.com/maps/dir/?api=1&destination=Villa+Grandinetti+Nocera+Terinese">Avvia navigazione</a>
            <a class="link-btn" target="_blank" href="http://www.villagrandinetti.it/">Sito della location</a>
          </div>
        </div>
      </article>
    </div>
  </section>

  <!-- ===== INFO UTILI ===== -->
  <section id="info" aria-labelledby="infoTitle">
    <div class="container" style="max-width:860px">
      <h2 class="section-title reveal" id="infoTitle">Info utili</h2>

      <div class="card reveal" style="margin-bottom:16px">
        <h3 style="margin:0 0 8px; font-family:'DM Serif Display','Playfair Display',serif; font-weight:400; color:var(--bordeaux);">Dress code</h3>
        <p style="margin:0; color:var(--salvia)">
          Dress code <strong>libero</strong>: venite come vi sentite meglio!
          Se vi va di seguire una palette, i colori consigliati sono <strong>bordeaux</strong> e <strong>rosa antico</strong>, ma <strong>nessun obbligo</strong>.
        </p>
      </div>

      <div class="card reveal" style="margin-bottom:16px">
        <h3 style="margin:0 0 8px; font-family:'DM Serif Display','Playfair Display',serif; font-weight:400; color:var(--bordeaux);">Alloggi</h3>
        <p style="margin:0; color:var(--salvia)">
          Se siete interessati ad alloggiare nei dintorni, la location ci ha suggerito alcune <strong>strutture consigliate</strong>:
          fatecelo sapere e ve le invieremo volentieri.
        </p>
      </div>

      <div class="card reveal" style="margin-bottom:16px">
        <h3 style="margin:0 0 8px; font-family:'DM Serif Display','Playfair Display',serif; font-weight:400; color:var(--bordeaux);">Navette & autobus</h3>
        <p style="margin:0; color:var(--salvia)">
          Se siete interessati a una <strong>navetta</strong> o a usufruire di un <strong>autobus</strong>, vi chiediamo di segnalarcelo
          il prima possibile e <strong>non oltre il 30/09/2026</strong>, così da organizzarci al meglio.
        </p>
      </div>

      <div class="card reveal">
        <h3 style="margin:0 0 8px; font-family:'DM Serif Display','Playfair Display',serif; font-weight:400; color:var(--bordeaux);">Lista nozze</h3>
        <p style="margin:.2em 0; color:var(--salvia)">
          Abbiamo già tutto il necessario per la casa. Se avete piacere di contribuire al nostro <strong>viaggio di nozze</strong>,
          potete usare questo IBAN: <strong>ITXXXXXXXXXXXxx</strong>. Grazie di cuore!
        </p>
        <p style="margin:.2em 0; color:var(--salvia)">
          RSVP entro <strong>30/09/2026</strong> — è molto apprezzata una conferma anticipata.
        </p>
      </div>
    </div>
  </section>

  <!-- ===== RSVP ===== -->
  <section id="rsvp" aria-labelledby="rsvpTitle">
    <div class="container" style="max-width:860px">
      <h2 class="section-title reveal" id="rsvpTitle">Sarà una gioia averti con noi</h2>
      <p class="section-sub reveal">Se sai già di poter venire, faccelo sapere ora.</p>
      <div class="cta-group" style="justify-content:center">
        <button class="btn btn-primary" id="btnWhatsApp2">RSVP su WhatsApp</button>
        <button class="btn btn-outline" id="btnICS2">Aggiungi al calendario</button>
      </div>
    </div>
  </section>

  <!-- ===== CONDIVIDI (QR + hashtag) ===== -->
  <section id="finale" aria-labelledby="finaleTitle">
    <div class="container">
      <h2 class="section-title reveal" id="finaleTitle">Condividi</h2>
      <div class="finale reveal">
        <div class="seal" aria-hidden="true"></div>
        <p style="margin:.2em 0 1em; color:var(--salvia)">Scansiona il QR o usa l’hashtag per condividere le foto.</p>

        <!-- QR code dinamico -->
        <div style="display:flex;justify-content:center;margin:10px 0 18px">
          <img id="qrImg" alt="QR code dell'invito" style="width:180px;height:180px;border-radius:12px;border:1px solid var(--line);box-shadow:var(--shadow)" />
        </div>

        <!-- Hashtag -->
        <p class="hashtag">#DarioMariaCostanza2026</p>

        <div class="cta-group" style="justify-content:center; margin-top:20px">
          <button class="btn btn-primary" id="btnWhatsApp3">RSVP</button>
          <button class="btn btn-outline" id="btnICS3">Aggiungi al calendario</button>
        </div>
      </div>
    </div>
  </section>

  <!-- ===== FOOTER ===== -->
  <footer>
    <div class="container">
      <p>Condividi facilmente:
        <button class="btn btn-outline" id="copyLink" title="Copia link" style="border-radius:10px">Copia link</button>
      </p>
      <p style="height:1em" aria-live="polite" id="copyStatus"></p>
      <p style="font-size:.9rem;color:var(--salvia)">Demo non indicizzabile — privacy rispettata</p>
    </div>
  </footer>

  <!-- ===== Sticky actions (mobile) ===== -->
  <div class="sticky-actions" role="toolbar" aria-label="Azioni rapide">
    <button class="btn btn-primary" id="btnWhatsApp_mobile">RSVP</button>
    <a href="#ristorante" class="link-btn">Mappa</a>
  </div>

  <!-- Selettore contatti WhatsApp -->
  <div class="wa-chooser" id="waChooser" role="dialog" aria-modal="true" aria-labelledby="waTitle">
    <div class="sheet">
      <h3 id="waTitle">Invia RSVP su WhatsApp</h3>
      <p>Scegli il contatto:</p>
      <div class="row">
        <button class="btn btn-outline" data-wa="contatto1">Contatto 1 — +39 348 827 3325</button>
        <button class="btn btn-outline" data-wa="contatto2">Contatto 2 — +39 388 773 7588</button>
      </div>
      <p style="margin-top:14px; color:var(--salvia); font-size:.9rem">
        Testo precompilato: “Ciao! Confermo la mia presenza per il 6/12/2026: Nome Cognome; n. persone; menu pesce o menu carne; eventuali allergie”.
      </p>
    </div>
  </div>

  <script>
    /* ===== Apertura busta (mobile-friendly) ===== */
    (function(){
      const overlay = document.getElementById('envOverlay');
      const env = document.getElementById('envelope');

      function openEnvelope(){
        if(env.classList.contains('open')) return;
        env.classList.add('open');
        setTimeout(()=>overlay.classList.add('fade-out'), 550);
        setTimeout(()=>{
          overlay.style.display='none';
          document.body.classList.remove('envelope-lock');
          document.getElementById('home').scrollIntoView({behavior:'smooth'});
        }, 1000);
      }
      // Supporto click/tap/keydown
      env.addEventListener('click', openEnvelope, {passive:true});
      env.addEventListener('touchstart', openEnvelope, {passive:true});
      env.addEventListener('keydown', (e)=>{ if(e.key==='Enter' || e.key===' ') openEnvelope(); });

      // Iniziale: CHIUSO
      env.classList.remove('open');
      overlay.addEventListener('click', (evt)=>{ if(evt.target===overlay) openEnvelope(); }, {passive:true});
    })();

    /* ===== Countdown ===== */
    const target = new Date(2026, 11, 6, 0, 0, 0); // 11 = dicembre
    function updateCountdown(){
      const now = new Date();
      const diff = target - now;
      const d = Math.max(0, Math.floor(diff / (1000*60*60*24)));
      const h = Math.max(0, Math.floor((diff / (1000*60*60)) % 24));
      const m = Math.max(0, Math.floor((diff / (1000*60)) % 60));
      const s = Math.max(0, Math.floor((diff / 1000) % 60));
      cdDays.textContent=d; cdHours.textContent=h; cdMinutes.textContent=m; cdSeconds.textContent=s;
    }
    updateCountdown(); setInterval(updateCountdown, 1000);

    /* ===== WhatsApp: due contatti + testo precompilato ===== */
    const chooser = document.getElementById('waChooser');
    const WA1 = "393488273325"; // +39 348 827 3325
    const WA2 = "393887737588"; // +39 388 773 7588
    const waMsg = encodeURIComponent(
      "Ciao! Confermo la mia presenza per il 6/12/2026: \n" +
      "Nome Cognome: \n" +
      "n. persone: \n" +
      "menu pesce o menu carne \n" +
      "eventuali allergie: "
    );
    function openChooser(){ chooser.style.display='flex'; }
    function closeChooser(){ chooser.style.display='none'; }
    function openWA(num){ window.open(`https://wa.me/${num}?text=${waMsg}`, '_blank', 'noopener'); closeChooser(); }

    chooser.addEventListener('click', (e)=>{ if(e.target===chooser) closeChooser(); });
    chooser.querySelector('[data-wa="contatto1"]').addEventListener('click', ()=> openWA(WA1));
    chooser.querySelector('[data-wa="contatto2"]').addEventListener('click', ()=> openWA(WA2));

    document.getElementById('btnWhatsApp').addEventListener('click', openChooser);
    document.getElementById('btnWhatsApp2').addEventListener('click', openChooser);
    document.getElementById('btnWhatsApp3').addEventListener('click', openChooser);
    document.getElementById('btnWhatsApp_mobile').addEventListener('click', openChooser);

    /* ===== ICS: Aggiungi al calendario (evento unico 11:00–19:00, ricevimento 13:00) ===== */
    function pad(n){return String(n).padStart(2,'0')}
    function toICS(){
      const dtStart = new Date(2026,11,6,11,0,0); // 6 dic 2026 11:00
      const dtEnd   = new Date(2026,11,6,19,0,0); // fine 19:00
      const fmt = d => `${d.getUTCFullYear()}${pad(d.getUTCMonth()+1)}${pad(d.getUTCDate())}T${pad(d.getUTCHours())}${pad(d.getUTCMinutes())}${pad(d.getUTCSeconds())}Z`;
      const ics =
`BEGIN:VCALENDAR
VERSION:2.0
PRODID:-//SaveTheDate//DarioMariaCostanza//IT
CALSCALE:GREGORIAN
BEGIN:VEVENT
UID:${Date.now()}@dario-mariacostanza
DTSTAMP:${fmt(new Date())}
DTSTART:${fmt(dtStart)}
DTEND:${fmt(dtEnd)}
SUMMARY:Matrimonio — Dario & Maria Costanza
DESCRIPTION:Cerimonia alle 11:00 (Chiesa di San Giovanni Battista) e ricevimento alle 13:00 (Villa Grandinetti).
LOCATION:Nocera Terinese (CZ)
END:VEVENT
END:VCALENDAR`;
      const blob = new Blob([ics], {type:'text/calendar;charset=utf-8'});
      const link = Object.assign(document.createElement('a'), {href:URL.createObjectURL(blob), download:'save-the-date-dario-maria-costanza.ics'});
      link.click(); URL.revokeObjectURL(link.href);
    }
    document.getElementById('btnICS').addEventListener('click', toICS);
    document.getElementById('btnICS2').addEventListener('click', toICS);
    document.getElementById('btnICS3').addEventListener('click', toICS);

    /* ===== Copia link ===== */
    copyLink.addEventListener('click', async ()=>{
      try{
        await navigator.clipboard.writeText(location.href);
        copyStatus.textContent = "Link copiato!"; setTimeout(()=>copyStatus.textContent="", 2500);
      }catch(e){ alert("Copia non disponibile in questo contesto."); }
    });

    /* ===== Reveal on scroll ===== */
    const io = new IntersectionObserver((entries)=>{
      entries.forEach(e=>{
        if(e.isIntersecting){ e.target.classList.add('show'); io.unobserve(e.target); }
      });
    }, {threshold:.12});
    document.querySelectorAll('.reveal, .cd-item').forEach(el=> io.observe(el));

    /* ===== Lazy-load mappe ===== */
    const mapChurch = document.getElementById('mapChurch');
    const mapVilla = document.getElementById('mapVilla');
    const mapSrcChurch = "https://www.google.com/maps?q=Chiesa+di+San+Giovanni+Battista+Nocera+Terinese&output=embed";
    const mapSrcVilla  = "https://www.google.com/maps?q=Villa+Grandinetti+Nocera+Terinese&output=embed";
    const mapIO = new IntersectionObserver((entries)=>{
      entries.forEach(e=>{
        if(e.isIntersecting){
          const el = e.target;
          if(el === mapChurch && !mapChurch.src) mapChurch.src = mapSrcChurch;
          if(el === mapVilla  && !mapVilla.src)  mapVilla.src  = mapSrcVilla;
          mapIO.unobserve(el);
        }
      });
    }, {threshold:.2});
    mapIO.observe(mapChurch); mapIO.observe(mapVilla);

    /* ===== QR code dinamico (punta all'URL aperto) ===== */
    (function(){
      const url = encodeURIComponent(location.href);
      const qr = `https://api.qrserver.com/v1/create-qr-code/?size=180x180&data=${url}`;
      const img = document.getElementById('qrImg');
      img.src = qr;
    })();
  </script>
</body>

</html>
